(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{22:function(e,t,a){e.exports=a.p+"static/media/CyberTrivia-cut.e9608543.png"},30:function(e,t,a){e.exports=a.p+"static/media/TriviaTitle2-ed.2372ddab.png"},36:function(e,t,a){e.exports=a(60)},44:function(e,t,a){},45:function(e,t,a){},47:function(e,t,a){},49:function(e,t){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},60:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),c=a(16),o=a.n(c),s=a(25),i=a(11),l=(a(44),a(3)),u=a(21),m=a(9),p=a(10),d=a(13),f=a(12),h=function(e){return{type:"SAVE_SCORE",payload:e}},g=a(32),y=a(22),b=a.n(y),v=a(30),E=a.n(v),k=(a(45),a(14)),N=a.n(k),O=a(20),j=a(15),S=a(31),w=function(){var e=Object(j.a)(N.a.mark((function e(t){var a,n,r,c,o;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.questionsAm,n=t.difficulty,r=t.category,c=t.token,o="",n.length&&!r.length&&(o="https://opentdb.com/api.php?amount=".concat(a,"&difficulty=").concat(n,"&token=").concat(c)),!n.length&&r.length&&(o="https://opentdb.com/api.php?amount=".concat(a,"&category=").concat(r,"&token=").concat(c)),n.length&&r.length&&(o="https://opentdb.com/api.php?amount=".concat(a,"&category=").concat(r,"&difficulty=").concat(n,"&token=").concat(c)),n.length||r.length||(o="https://opentdb.com/api.php?amount=".concat(a,"&token=").concat(c)),e.abrupt("return",fetch(o).then((function(e){return e.json()})).then((function(e){return e})));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(j.a)(N.a.mark((function e(){return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("https://opentdb.com/api_category.php").then((function(e){return e.json()})).then((function(e){return e.trivia_categories})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=(a(47),function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={categories:[]},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=Object(j.a)(N.a.mark((function e(){var t,a,n;return N.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:"",name:"Any Category"},e.next=3,C();case 3:a=e.sent,n=[t].concat(Object(O.a)(a)),this.setState({categories:n});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.toggle,a=e.change,n=e.diff,o=e.category,s=e.questions,i=this.state.categories;return Object(c.createPortal)(r.a.createElement("main",{className:"modal-overlay"},r.a.createElement("section",{className:"modal-container"},r.a.createElement("div",{className:"title-div"},r.a.createElement("h2",null,"settings")),r.a.createElement(S.a,{size:40,className:"close-button",onClick:t}),r.a.createElement("div",{className:"options-container"},r.a.createElement("label",null,"number of questions",r.a.createElement("select",{name:"questions",value:s,onChange:a},[5,6,7,8,9,10].map((function(e){return r.a.createElement("option",{key:e,value:e},e)})))),r.a.createElement("label",null,"difficulty",r.a.createElement("select",{name:"difficulty",value:n,onChange:a},r.a.createElement("option",{value:""},"any difficulty"),r.a.createElement("option",{value:"easy"},"easy"),r.a.createElement("option",{value:"medium"},"medium"),r.a.createElement("option",{value:"hard"},"hard"))),r.a.createElement("label",null,"category",r.a.createElement("select",{name:"category",value:o,onChange:a,className:"category-select"},Boolean(i.length)&&i.map((function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name.toLowerCase())}))))))),document.getElementById("modal-root"))}}]),a}(r.a.Component)),x=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(u.a)({},r,n))},e.handleClick=function(){fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json()})).then((function(t){var a=t.token,n=e.props,r=n.history,c=n.dispatch,o=e.state,s=o.difficulty,i=o.category,l=o.questions;c({type:"SAVE_USER_INFO",payload:e.state}),c(function(e){return{type:"SAVE_SETTINGS",payload:e}}({difficulty:s,category:i,questions:l})),localStorage.setItem("token",a),r.push("/game")}))},e.validateLogin=function(){var t=e.state,a=t.name,n=t.email;return!(a.length&&n.length)},e.toggleSettings=function(){e.setState((function(e){return{showSettings:!e.showSettings}}))},e.state={name:"",email:"",showSettings:!1,difficulty:"",category:"",questions:5},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)({type:"RESET_STORE"})}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.name,n=e.showSettings,c=e.difficulty,o=e.category,s=e.questions;return r.a.createElement("main",{className:"login-page"},r.a.createElement("section",{className:"form-card"},r.a.createElement("img",{src:E.a,alt:"Trivia title",className:"title"}),r.a.createElement("form",{className:"form"},r.a.createElement("input",{type:"text",className:"name-input","data-testid":"input-player-name",placeholder:"TYPE YOUR NAME",name:"name",value:a,autoComplete:"off",onChange:this.handleChange}),r.a.createElement("input",{type:"email",className:"email-input","data-testid":"input-gravatar-email",placeholder:"TYPE YOUR E-MAIL",name:"email",value:t,autoComplete:"off",onChange:this.handleChange}),r.a.createElement("button",{type:"button",disabled:this.validateLogin(),onClick:this.handleClick,className:"login-button","data-testid":"btn-play"},"PLAY"),r.a.createElement(g.a,{className:"settings-button",onClick:this.toggleSettings}))),r.a.createElement("img",{src:b.a,alt:"CyberTrivia",className:"logo"}),n&&r.a.createElement(I,{toggle:this.toggleSettings,change:this.handleChange,diff:c,category:o,questions:+s}))}}]),a}(r.a.Component),q=Object(i.b)()(x),A=a(8),_=a(23),T=a(33),D=a.n(T),M=(a(50),function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={hash:""},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.gravatarEmail,a=e.dispatch,n=D()(t).toString(),r="https://www.gravatar.com/avatar/".concat(n);a({type:"ADD_IMAGE_URL",payload:r}),this.setState({hash:n})}},{key:"render",value:function(){var e=this.state.hash,t=this.props,a=t.name,n=t.score;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"img-div"},r.a.createElement("img",{src:"https://www.gravatar.com/avatar/".concat(e),alt:"Player avatar","data-testid":"header-profile-picture",className:"player-img"}),r.a.createElement("p",{"data-testid":"header-player-name",className:"player-name"}," ",a," ")),r.a.createElement("p",{"data-testid":"header-score",className:"player-score"},"POINTS: ".concat(n)))}}]),a}(r.a.Component)),R=Object(i.b)((function(e){return{name:e.player.name,gravatarEmail:e.player.gravatarEmail,score:e.player.score}}))(M),L=(a(51),function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).intervalFunc=function(){e.intervalID=setInterval((function(){1===e.state.timer&&e.setState({disabled:!0,nextButton:!0}),e.setState((function(e){return{timer:e.timer-1}}))}),1e3)},e.fetchQuestion=Object(j.a)(N.a.mark((function t(){var a,n,r,c,o,s,i,l,u,m;return N.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=localStorage.getItem("token"),n=3,r=e.props,c=r.questionsAm,o=r.difficulty,s=r.category,t.next=5,w({questionsAm:c,difficulty:o,category:s,token:a});case 5:(i=t.sent).response_code===n&&(l=e.props.history,localStorage.removeItem("token"),l.push("/")),u=i.results,.5,m=u.map((function(e){return Object(A.a)(Object(A.a)({},e),{},{shuffledQuestions:[].concat(Object(O.a)(e.incorrect_answers),[e.correct_answer]).sort((function(){return Math.random()-.5}))})})),e.setState({results:m});case 11:case"end":return t.stop()}}),t)}))),e.handleClick=function(t,a){var n=e.state.timer;clearInterval(e.intervalID),e.setState({classInfo:!0,nextButton:!0,disabled:!0});var r=e.props.dispatch;if("right"===t){switch(a){case"hard":r(h(10+3*n));break;case"medium":r(h(10+2*n));break;case"easy":r(h(10+1*n))}}},e.handleNext=function(){e.setState((function(e){return{index:e.index+1,classInfo:!1,timer:30,nextButton:!1,disabled:!1}}),(function(){return e.intervalFunc()}))},e.createMarkup=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value.toUpperCase()},e.state={results:[],index:0,classInfo:!1,timer:30,nextButton:!1,disabled:!1},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchQuestion(),this.intervalFunc()}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.timer,a=e.index,n=this.props,r=n.history,c=n.name,o=n.picture,s=n.score,i=n.questionsAm,l={name:c,picture:o,score:s};if(0===t&&clearInterval(this.intervalID),a===+i){localStorage.getItem("ranking")||localStorage.setItem("ranking",JSON.stringify([]));var u=JSON.parse(localStorage.getItem("ranking"));localStorage.setItem("ranking",JSON.stringify([].concat(Object(O.a)(u),[l]))),r.push("/feedback")}}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.state,a=t.results,n=t.classInfo,c=t.index,o=t.timer,s=t.nextButton,i=t.disabled;return r.a.createElement("main",{className:"game-page"},r.a.createElement(R,null),r.a.createElement("section",{className:"main-section"},r.a.createElement("section",{className:"game-section"},r.a.createElement("p",{className:"timer"},r.a.createElement(_.a,{className:i?"hourglass stop":"hourglass"})," ",o),r.a.createElement("img",{src:b.a,alt:"CyberTrivia",className:"game-logo"}),Boolean(a.length)&&a.map((function(t,a){return c===a?r.a.createElement("div",{key:t.question,className:"question-div"},r.a.createElement("p",{"data-testid":"question-category",className:"question-category"},t.category),r.a.createElement("p",{"data-testid":"question-text",className:"question-text"},e.createMarkup(t.question)),r.a.createElement("div",{"data-testid":"answer-options",className:"answer-options"},t.shuffledQuestions.map((function(a,c){return t.correct_answer===a?r.a.createElement("button",{type:"button","data-testid":"correct-answer",key:"correct-answer",className:n?"btn correct-answer":"btn",onClick:function(){return e.handleClick("right",t.difficulty)},disabled:i},e.createMarkup(a)):r.a.createElement("button",{key:"wrong-answer-".concat(c),type:"button","data-testid":"wrong-answer-".concat(c),className:n?"btn wrong-answer":"btn",onClick:function(){return e.handleClick("wrong")},disabled:i},e.createMarkup(a))}))),r.a.createElement("button",{type:"button","data-testid":"btn-next",className:s?"next-btn":"next-btn hidden",onClick:e.handleNext},"NEXT")):""})))))}}]),a}(r.a.Component)),B=Object(i.b)((function(e){return{name:e.player.name,picture:e.player.url,score:e.player.score,category:e.player.category,questionsAm:e.player.questions,difficulty:e.player.difficulty}}))(L),P=(a(52),function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score,n=e.history;return r.a.createElement("main",{className:"feedback-page"},r.a.createElement(R,null),r.a.createElement("section",{className:"feedback-section"},r.a.createElement("section",{className:"feedback-card"},r.a.createElement("div",{className:"text-div"},r.a.createElement("p",{"data-testid":"feedback-text",className:"feedback-text"},t<3?"Could be better...":"Well Done!"),r.a.createElement("p",{className:"feedback-assertions"},"You've got"," ",r.a.createElement("span",{"data-testid":"feedback-total-question"},t)," ",1===t?"question":"questions"," right!"),r.a.createElement("p",{className:"feedback-points"},r.a.createElement("span",{"data-testid":"feedback-total-score"},a)," ","points")),r.a.createElement("div",{className:"btn-div"},r.a.createElement("button",{type:"button",onClick:function(){return n.push("/")},"data-testid":"btn-play-again"},"PLAY AGAIN"),r.a.createElement("button",{type:"button",onClick:function(){return n.push("/ranking")},"data-testid":"btn-ranking"},"RANKING")))))}}]),a}(r.a.Component)),U=Object(i.b)((function(e){return{assertions:e.player.assertions,score:e.player.score}}))(P),Y=(a(53),function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={ranking:[]},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem("ranking")||localStorage.setItem("ranking",JSON.stringify([]));var e=JSON.parse(localStorage.getItem("ranking"));e.sort((function(e,t){return t.score-e.score})),this.setState({ranking:e})}},{key:"render",value:function(){var e=this.props.history,t=this.state.ranking;return r.a.createElement("main",{className:"ranking-page"},r.a.createElement(_.b,{"data-testid":"ranking-title",className:"ranking-logo",size:60}),r.a.createElement("section",{className:"ranking-section"},t.map((function(e,t){var a=e.picture,n=e.name,c=e.score;return r.a.createElement("div",{key:a+t,className:"player-ranking"},r.a.createElement("div",{className:"player-img-div"},r.a.createElement("img",{src:a,alt:"Player avatar",className:"player-img-rk"})),r.a.createElement("p",{"data-testid":"player-name-".concat(t)},n),r.a.createElement("p",{"data-testid":"player-score-".concat(t),className:"rk-score"},c),r.a.createElement("div",{className:"underline"}))}))),r.a.createElement("button",{type:"button",onClick:function(){return e.push("/")},"data-testid":"btn-go-home",className:"play-btn"},"PLAY AGAIN"))}}]),a}(r.a.Component)),G=Object(i.b)()(Y);a(54);function J(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:q}),r.a.createElement(l.a,{path:"/game",component:B}),r.a.createElement(l.a,{path:"/feedback",component:U}),r.a.createElement(l.a,{path:"/ranking",component:G})))}var V=a(18),F=a(35),Q={name:"",assertions:0,score:0,gravatarEmail:"",url:"",category:"",difficulty:"",questions:5},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_USER_INFO":return Object(A.a)(Object(A.a)({},e),{},{name:t.payload.name,gravatarEmail:t.payload.email});case"SAVE_SCORE":return Object(A.a)(Object(A.a)({},e),{},{score:e.score+t.payload,assertions:e.assertions+1});case"SAVE_SETTINGS":return Object(A.a)(Object(A.a)({},e),{},{category:t.payload.category,difficulty:t.payload.difficulty,questions:t.payload.questions});case"ADD_IMAGE_URL":return Object(A.a)(Object(A.a)({},e),{},{url:t.payload});case"RESET_STORE":return Object(A.a)({},Q);default:return e}},z=Object(V.combineReducers)({player:W}),H=Object(V.legacy_createStore)(z,Object(F.composeWithDevTools)());window.Cypress&&(window.store=H);var K=H;o.a.render(r.a.createElement(i.a,{store:K},r.a.createElement(s.a,{basename:"/cybertrivia"},r.a.createElement(J,null))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.7cbed271.chunk.js.map