(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/CyberTrivia-cut.e9608543.png"},27:function(e,t,a){e.exports=a.p+"static/media/TriviaTitle2-ed.2372ddab.png"},31:function(e,t,a){e.exports=a(53)},39:function(e,t,a){},40:function(e,t,a){},42:function(e,t){},43:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},53:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),s=a.n(c),i=a(21),o=a(9),l=(a(39),a(2)),u=a(17),m=a(7),p=a(8),d=a(11),h=a(10),b=function(e){return{type:"SAVE_SCORE",payload:e}},f=a(18),g=a.n(f),v=a(27),E=a.n(v),y=(a(40),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(u.a)({},r,n))},e.handleClick=function(){fetch("https://opentdb.com/api_token.php?command=request").then((function(e){return e.json()})).then((function(t){var a=t.token,n=e.props,r=n.history;(0,n.dispatch)({type:"SAVE_USER_INFO",payload:e.state}),localStorage.setItem("token",a),r.push("/game")}))},e.validateLogin=function(){var t=e.state,a=t.name,n=t.email;return!(a.length&&n.length)},e.state={name:"",email:""},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)({type:"RESET_STORE"})}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.name;return r.a.createElement("main",{className:"login-page"},r.a.createElement("section",{className:"form-card"},r.a.createElement("img",{src:E.a,alt:"Trivia title",className:"title"}),r.a.createElement("form",{className:"form"},r.a.createElement("input",{type:"text",className:"name-input","data-testid":"input-player-name",placeholder:"TYPE YOUR NAME",name:"name",value:a,autoComplete:"off",onChange:this.handleChange}),r.a.createElement("input",{type:"email",className:"email-input","data-testid":"input-gravatar-email",placeholder:"TYPE YOUR E-MAIL",name:"email",value:t,autoComplete:"off",onChange:this.handleChange}),r.a.createElement("button",{type:"button",disabled:this.validateLogin(),onClick:this.handleClick,className:"login-button","data-testid":"btn-play"},"PLAY"))),r.a.createElement("img",{src:g.a,alt:"CyberTrivia",className:"logo"}))}}]),a}(r.a.Component)),k=Object(o.b)()(y),N=a(23),O=a(12),j=a(19),S=a(28),C=a.n(S),I=(a(43),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={hash:""},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.gravatarEmail,a=e.dispatch,n=C()(t).toString(),r="https://www.gravatar.com/avatar/".concat(n);a({type:"ADD_IMAGE_URL",payload:r}),this.setState({hash:n})}},{key:"render",value:function(){var e=this.state.hash,t=this.props,a=t.name,n=t.score;return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"img-div"},r.a.createElement("img",{src:"https://www.gravatar.com/avatar/".concat(e),alt:"Player avatar","data-testid":"header-profile-picture",className:"player-img"}),r.a.createElement("p",{"data-testid":"header-player-name",className:"player-name"}," ",a," ")),r.a.createElement("p",{"data-testid":"header-score",className:"player-score"},"POINTS: ".concat(n)))}}]),a}(r.a.Component)),w=Object(o.b)((function(e){return{name:e.player.name,gravatarEmail:e.player.gravatarEmail,score:e.player.score}}))(I),x=(a(44),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).intervalFunc=function(){e.intervalID=setInterval((function(){1===e.state.timer&&e.setState({disabled:!0,nextButton:!0}),e.setState((function(e){return{timer:e.timer-1}}))}),1e3)},e.fetchQuestion=function(){var t=localStorage.getItem("token");fetch("https://opentdb.com/api.php?amount=5&token=".concat(t)).then((function(e){return e.json()})).then((function(t){if(3===t.response_code){var a=e.props.history;localStorage.removeItem("token"),a.push("/")}var n=t.results,r=n.map((function(e){return Object(O.a)(Object(O.a)({},e),{},{shuffledQuestions:[].concat(Object(N.a)(e.incorrect_answers),[e.correct_answer]).sort((function(){return Math.random()-.5}))})}));e.setState({results:r})}))},e.handleClick=function(t,a){var n=e.state.timer;clearInterval(e.intervalID),e.setState({classInfo:!0,nextButton:!0,disabled:!0});var r=e.props.dispatch;if("right"===t){switch(a){case"hard":r(b(10+3*n));break;case"medium":r(b(10+2*n));break;case"easy":r(b(10+1*n))}}},e.handleNext=function(){e.setState((function(e){return{index:e.index+1,classInfo:!1,timer:30,nextButton:!1,disabled:!1}}),(function(){return e.intervalFunc()}))},e.createMarkup=function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value.toUpperCase()},e.state={results:[],index:0,classInfo:!1,timer:30,nextButton:!1,disabled:!1},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){this.fetchQuestion(),this.intervalFunc()}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.timer,a=e.index,n=this.props,r=n.history,c={name:n.name,picture:n.picture,score:n.score};if(0===t&&clearInterval(this.intervalID),5===a){localStorage.getItem("ranking")||localStorage.setItem("ranking",JSON.stringify([]));var s=JSON.parse(localStorage.getItem("ranking"));localStorage.setItem("ranking",JSON.stringify([].concat(Object(N.a)(s),[c]))),r.push("/feedback")}}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"render",value:function(){var e=this,t=this.state,a=t.results,n=t.classInfo,c=t.index,s=t.timer,i=t.nextButton,o=t.disabled;return r.a.createElement("main",{className:"game-page"},r.a.createElement(w,null),r.a.createElement("section",{className:"main-section"},r.a.createElement("section",{className:"game-section"},r.a.createElement("p",{className:"timer"},r.a.createElement(j.a,{className:o?"hourglass stop":"hourglass"})," ",s),r.a.createElement("img",{src:g.a,alt:"CyberTrivia",className:"game-logo"}),Boolean(a.length)&&a.map((function(t,a){return c===a?r.a.createElement("div",{key:t.question,className:"question-div"},r.a.createElement("p",{"data-testid":"question-category",className:"question-category"},t.category),r.a.createElement("p",{"data-testid":"question-text",className:"question-text"},e.createMarkup(t.question)),r.a.createElement("div",{"data-testid":"answer-options",className:"answer-options"},t.shuffledQuestions.map((function(a,c){return t.correct_answer===a?r.a.createElement("button",{type:"button","data-testid":"correct-answer",key:"correct-answer",className:n?"btn correct-answer":"btn",onClick:function(){return e.handleClick("right",t.difficulty)},disabled:o},e.createMarkup(a)):r.a.createElement("button",{key:"wrong-answer-".concat(c),type:"button","data-testid":"wrong-answer-".concat(c),className:n?"btn wrong-answer":"btn",onClick:function(){return e.handleClick("wrong")},disabled:o},e.createMarkup(a))}))),r.a.createElement("button",{type:"button","data-testid":"btn-next",className:i?"next-btn":"next-btn hidden",onClick:e.handleNext},"NEXT")):""})))))}}]),a}(r.a.Component)),A=Object(o.b)((function(e){return{name:e.player.name,picture:e.player.url,score:e.player.score}}))(x),_=function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("h1",{"data-testid":"settings-title"},"Configura\xe7\xf5es")}}]),a}(r.a.Component),T=(a(45),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score,n=e.history;return r.a.createElement("main",{className:"feedback-page"},r.a.createElement(w,null),r.a.createElement("section",{className:"feedback-section"},r.a.createElement("section",{className:"feedback-card"},r.a.createElement("div",{className:"text-div"},r.a.createElement("p",{"data-testid":"feedback-text",className:"feedback-text"},t<3?"Could be better...":"Well Done!"),r.a.createElement("p",{className:"feedback-assertions"},"You've got"," ",r.a.createElement("span",{"data-testid":"feedback-total-question"},t)," ",1===t?"question":"questions"," right!"),r.a.createElement("p",{className:"feedback-points"},r.a.createElement("span",{"data-testid":"feedback-total-score"},a)," ","points")),r.a.createElement("div",{className:"btn-div"},r.a.createElement("button",{type:"button",onClick:function(){return n.push("/")},"data-testid":"btn-play-again"},"PLAY AGAIN"),r.a.createElement("button",{type:"button",onClick:function(){return n.push("/ranking")},"data-testid":"btn-ranking"},"RANKING")))))}}]),a}(r.a.Component)),D=Object(o.b)((function(e){return{assertions:e.player.assertions,score:e.player.score}}))(T),M=(a(46),function(e){Object(d.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).state={ranking:[]},e}return Object(p.a)(a,[{key:"componentDidMount",value:function(){localStorage.getItem("ranking")||localStorage.setItem("ranking",JSON.stringify([]));var e=JSON.parse(localStorage.getItem("ranking"));e.sort((function(e,t){return t.score-e.score})),this.setState({ranking:e})}},{key:"render",value:function(){var e=this.props.history,t=this.state.ranking;return r.a.createElement("main",{className:"ranking-page"},r.a.createElement(j.b,{"data-testid":"ranking-title",className:"ranking-logo",size:60}),r.a.createElement("section",{className:"ranking-section"},t.map((function(e,t){var a=e.picture,n=e.name,c=e.score;return r.a.createElement("div",{key:a+t,className:"player-ranking"},r.a.createElement("div",{className:"player-img-div"},r.a.createElement("img",{src:a,alt:"Player avatar",className:"player-img-rk"})),r.a.createElement("p",{"data-testid":"player-name-".concat(t)},n),r.a.createElement("p",{"data-testid":"player-score-".concat(t),className:"rk-score"},c),r.a.createElement("div",{className:"underline"}))}))),r.a.createElement("button",{type:"button",onClick:function(){return e.push("/")},"data-testid":"btn-go-home",className:"play-btn"},"PLAY AGAIN"))}}]),a}(r.a.Component)),R=Object(o.b)()(M);a(47);function q(){return r.a.createElement("div",{className:"App"},r.a.createElement(l.c,null,r.a.createElement(l.a,{exact:!0,path:"/",component:k}),r.a.createElement(l.a,{path:"/game",component:A}),r.a.createElement(l.a,{path:"/settings",component:_}),r.a.createElement(l.a,{path:"/feedback",component:D}),r.a.createElement(l.a,{path:"/ranking",component:R})))}var L=a(14),U=a(30),P={name:"",assertions:0,score:0,gravatarEmail:"",url:""},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_USER_INFO":return Object(O.a)(Object(O.a)({},e),{},{name:t.payload.name,gravatarEmail:t.payload.email});case"SAVE_SCORE":return Object(O.a)(Object(O.a)({},e),{},{score:e.score+t.payload,assertions:e.assertions+1});case"ADD_IMAGE_URL":return Object(O.a)(Object(O.a)({},e),{},{url:t.payload});case"RESET_STORE":return Object(O.a)({},P);default:return e}},B=Object(L.combineReducers)({player:Y}),J=Object(L.legacy_createStore)(B,Object(U.composeWithDevTools)());window.Cypress&&(window.store=J);var F=J;s.a.render(r.a.createElement(o.a,{store:F},r.a.createElement(i.a,{basename:"/cybertrivia"},r.a.createElement(q,null))),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.c8b536b7.chunk.js.map